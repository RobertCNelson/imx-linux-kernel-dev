From f7e68b6d9e13b7cde27baafd478a363156e84f99 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Thu, 17 Sep 2015 15:44:29 -0500
Subject: [PATCH 46/97] apply backport patch
 collateral-evolutions/network/0028-select_queue/mwifiex.patch

---
 backports/drivers/net/wireless/mwifiex/main.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/backports/drivers/net/wireless/mwifiex/main.c b/backports/drivers/net/wireless/mwifiex/main.c
index 03a95c7..e83b258 100644
--- a/backports/drivers/net/wireless/mwifiex/main.c
+++ b/backports/drivers/net/wireless/mwifiex/main.c
@@ -973,9 +973,19 @@ static struct net_device_stats *mwifiex_get_stats(struct net_device *dev)
 	return &priv->stats;
 }
 
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(3,14,0) || \
+    (LINUX_VERSION_CODE == KERNEL_VERSION(3,13,11) && UTS_UBUNTU_RELEASE_ABI > 30)
 static u16
 mwifiex_netdev_select_wmm_queue(struct net_device *dev, struct sk_buff *skb,
 				void *accel_priv, select_queue_fallback_t fallback)
+#elif LINUX_VERSION_CODE >= KERNEL_VERSION(3,13,0)
+static u16
+mwifiex_netdev_select_wmm_queue(struct net_device *dev, struct sk_buff *skb,
+				void *accel_priv)
+#else
+static u16
+mwifiex_netdev_select_wmm_queue(struct net_device *dev, struct sk_buff *skb)
+#endif
 {
 	skb->priority = cfg80211_classify8021d(skb, NULL);
 	return mwifiex_1d_to_wmm_queue[skb->priority];
-- 
2.5.1

